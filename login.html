<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lumina - Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <style>
      body { font-family: "Inter", sans-serif; }
      .glass-panel { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(16px); border: 1px solid rgba(255, 255, 255, 0.08); box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1); }
      .glass-input { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: white; }
      .glass-input:focus { background: rgba(255, 255, 255, 0.1); border-color: rgba(99, 102, 241, 0.5); outline: none; }
    </style>
  </head>
  <body class="bg-[#0a0a0c] text-slate-200 font-sans min-h-screen selection:bg-indigo-500/30 overflow-hidden flex items-center justify-center relative">
    <div class="fixed top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none">
      <div class="absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-600/20 blur-[120px] rounded-full"></div>
      <div class="absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-600/20 blur-[120px] rounded-full"></div>
    </div>

    <div class="glass-panel w-full max-w-md p-8 rounded-3xl relative overflow-hidden">
      <div class="absolute top-0 right-0 w-full h-2 bg-gradient-to-r from-indigo-500 to-purple-500"></div>
      <div class="text-center mb-8">
        <div class="w-14 h-14 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg shadow-indigo-500/20 mx-auto mb-4">
          <i data-lucide="zap" class="text-white fill-white w-7 h-7"></i>
        </div>
        <h1 class="text-2xl font-bold text-white">Welcome Back</h1>
        <p class="text-slate-400 text-sm mt-2">Enter your credentials to access Lumina</p>
      </div>

      <form id="auth-form" class="space-y-4">
        <div>
          <label class="block text-xs font-medium text-slate-500 mb-1 uppercase tracking-wider">Email</label>
          <div class="relative">
            <i data-lucide="mail" class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"></i>
            <input type="email" id="email" required class="glass-input w-full rounded-xl py-3 pl-10 pr-4 text-sm" placeholder="name@company.com" />
          </div>
        </div>
        <div>
          <label class="block text-xs font-medium text-slate-500 mb-1 uppercase tracking-wider">Password</label>
          <div class="relative">
            <i data-lucide="lock" class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"></i>
            <input type="password" id="password" required class="glass-input w-full rounded-xl py-3 pl-10 pr-4 text-sm" placeholder="••••••••" />
          </div>
        </div>
        <div id="error-msg" class="text-rose-400 text-xs text-center hidden"></div>
        <button type="submit" id="submit-btn" class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3.5 rounded-xl transition-all shadow-lg shadow-indigo-600/20 mt-2">Sign In</button>
      </form>

      <div class="mt-6 text-center">
        <p class="text-slate-500 text-sm">No account? <button onclick="toggleMode()" id="toggle-text" class="text-indigo-400 hover:text-white font-medium transition-colors">Sign Up</button></p>
      </div>
    </div>

    <script>
      lucide.createIcons();
      const SUPABASE_URL = "https://jwrgsmluqhqlxizsuyzc.supabase.co";
      const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp3cmdzbWx1cWhxbHhpenN1eXpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczNjQ1OTYsImV4cCI6MjA4Mjk0MDU5Nn0.daGg1TXP3JjrkQeEodEPBY97ThfFRH3cppETLTWUl8Y";
      const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

      let isSignUp = false;

      function toggleMode() {
        isSignUp = !isSignUp;
        const title = document.querySelector('h1');
        const btn = document.getElementById('submit-btn');
        const toggle = document.getElementById('toggle-text');
        
        if (isSignUp) { title.innerText = "Create Account"; btn.innerText = "Sign Up"; toggle.innerText = "Sign In"; } 
        else { title.innerText = "Welcome Back"; btn.innerText = "Sign In"; toggle.innerText = "Sign Up"; }
        document.getElementById('error-msg').classList.add('hidden');
      }

      document.getElementById('auth-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const errDiv = document.getElementById('error-msg');
        const btn = document.getElementById('submit-btn');

        btn.innerText = "Loading..."; btn.disabled = true; errDiv.classList.add('hidden');

        try {
          let error = null;
          if (isSignUp) {
            const res = await supabase.auth.signUp({ email, password });
            error = res.error;
            if (!error) { alert("Account created! Logging in..."); window.location.href = "index.html"; }
          } else {
            const res = await supabase.auth.signInWithPassword({ email, password });
            error = res.error;
            if (!error) window.location.href = "index.html";
          }
          if (error) throw error;
        } catch (err) {
          errDiv.innerText = err.message; errDiv.classList.remove('hidden');
        } finally {
          btn.innerText = isSignUp ? "Sign Up" : "Sign In"; btn.disabled = false;
        }
      });
    </script>
  </body>
</html>