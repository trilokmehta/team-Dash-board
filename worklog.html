<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lumina - Work Log</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .glass-panel { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(16px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .glass-input { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: white; }
        .glass-input:focus { background: rgba(255, 255, 255, 0.1); border-color: rgba(99, 102, 241, 0.5); outline: none; }
        .fade-in { animation: fadeIn 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-[#0a0a0c] text-slate-200 font-sans min-h-screen selection:bg-indigo-500/30 overflow-hidden flex">
    
    <div class="fixed top-0 left-0 w-full h-full -z-10 pointer-events-none"><div class="absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-indigo-600/20 blur-[120px] rounded-full"></div><div class="absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-purple-600/10 blur-[120px] rounded-full"></div></div>

    <nav class="w-20 xl:w-72 border-r border-white/5 bg-black/20 backdrop-blur-xl p-4 flex flex-col gap-6 h-screen z-50">
        <div class="flex items-center gap-3 px-2 mb-2 justify-center xl:justify-start">
             <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg shadow-indigo-500/20"><i data-lucide="zap" class="text-white fill-white w-5 h-5"></i></div>
            <span class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400 hidden xl:block">Lumina</span>
        </div>
        <div class="flex flex-col gap-2 flex-1 overflow-y-auto">
            <a href="index.html" class="flex items-center gap-4 px-4 py-3.5 rounded-2xl w-full text-slate-500 hover:bg-white/5 hover:text-slate-300 transition-all group"><i data-lucide="layout-dashboard" class="w-5 h-5 group-hover:scale-110 transition-transform"></i><span class="text-sm font-medium hidden xl:block">Dashboard</span></a>
            <a href="finance.html" class="flex items-center gap-4 px-4 py-3.5 rounded-2xl w-full text-slate-500 hover:bg-white/5 hover:text-slate-300 transition-all group"><i data-lucide="trending-up" class="w-5 h-5 group-hover:scale-110 transition-transform"></i><span class="text-sm font-medium hidden xl:block">Finance</span></a>
            <a href="mywork.html" class="flex items-center gap-4 px-4 py-3.5 rounded-2xl w-full text-slate-500 hover:bg-white/5 hover:text-slate-300 transition-all group"><i data-lucide="kanban-square" class="w-5 h-5 group-hover:scale-110 transition-transform"></i><span class="text-sm font-medium hidden xl:block">My Work</span></a>
            <a href="worklog.html" class="flex items-center gap-4 px-4 py-3.5 rounded-2xl w-full bg-indigo-600 text-white shadow-lg shadow-indigo-600/20 transition-all"><i data-lucide="notebook-pen" class="w-5 h-5 scale-110"></i><span class="text-sm font-medium hidden xl:block">Daily Log</span></a>
            <a href="files.html" class="flex items-center gap-4 px-4 py-3.5 rounded-2xl w-full text-slate-500 hover:bg-white/5 hover:text-slate-300 transition-all group"><i data-lucide="folder-open" class="w-5 h-5 group-hover:scale-110 transition-transform"></i><span class="text-sm font-medium hidden xl:block">Company Files</span></a>
            <a href="passwords.html" class="flex items-center gap-4 px-4 py-3.5 rounded-2xl w-full text-slate-500 hover:bg-white/5 hover:text-slate-300 transition-all group"><i data-lucide="lock" class="w-5 h-5 group-hover:scale-110 transition-transform"></i><span class="text-sm font-medium hidden xl:block">IDs & Passwords</span></a>
            <a href="monitoring.html" class="flex items-center gap-4 px-4 py-3.5 rounded-2xl w-full text-slate-500 hover:bg-white/5 hover:text-slate-300 transition-all group"><i data-lucide="activity" class="w-5 h-5 group-hover:scale-110 transition-transform"></i><span class="text-sm font-medium hidden xl:block">Monitoring</span></a>
            <a href="chats.html" class="flex items-center gap-4 px-4 py-3.5 rounded-2xl w-full text-slate-500 hover:bg-white/5 hover:text-slate-300 mt-auto transition-all group"><i data-lucide="message-square" class="w-5 h-5 group-hover:scale-110 transition-transform"></i><span class="text-sm font-medium hidden xl:block">Chats</span></a>
        </div>
    </nav>

    <main class="flex-1 flex flex-col h-screen overflow-hidden">
        <header class="h-20 px-8 flex items-center justify-between border-b border-white/5 bg-[#0a0a0c]/80 backdrop-blur-sm">
            <h1 class="text-2xl font-bold text-white">Daily Work Log</h1>
        </header>

        <div class="flex-1 overflow-y-auto p-8 fade-in">
             <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-1">
                    <div class="glass-panel p-6 rounded-3xl sticky top-0">
                        <h3 class="font-bold text-lg text-white mb-6">New Log Entry</h3>
                        <form onsubmit="submitLog(event)" class="space-y-4">
                            <div><label class="block text-xs font-medium text-slate-500 mb-1">Date</label><input type="date" id="logDate" required class="glass-input w-full rounded-xl p-3 text-sm"></div>
                            <div><label class="block text-xs font-medium text-slate-500 mb-1">Hours</label><input type="number" id="logHours" step="0.5" required class="glass-input w-full rounded-xl p-3 text-sm" placeholder="e.g. 8"></div>
                            <div><label class="block text-xs font-medium text-slate-500 mb-1">Details</label><textarea id="logDesc" rows="4" required class="glass-input w-full rounded-xl p-3 text-sm" placeholder="What did you work on?"></textarea></div>
                            <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-500 text-white font-medium py-3 rounded-xl transition-all shadow-lg shadow-indigo-600/20">Save Entry</button>
                        </form>
                    </div>
                </div>
                <div class="lg:col-span-2 space-y-4">
                    <h3 class="font-bold text-lg text-white">History</h3>
                    <div id="log-list">
                        <div class="text-center text-slate-500 mt-10">Loading logs...</div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script>
        // --- 1. CONFIGURATION ---
        const SUPABASE_URL = 'https://jwrgsmluqhqlxizsuyzc.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_cmmex6QtxyXxodgdLdsJnQ_X6BmijWo'; 
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        lucide.createIcons();
        document.getElementById('logDate').valueAsDate = new Date();

        // --- 2. LOGIC ---
        function renderLogs(logs) {
            const container = document.getElementById('log-list');
            if(!logs || logs.length === 0) { 
                container.innerHTML = '<div class="p-8 text-center text-slate-500 border border-dashed border-white/10 rounded-2xl">No logs yet.</div>'; 
                return; 
            }
            
            container.innerHTML = logs.map(l => `
                <div class="glass-panel p-5 rounded-2xl flex justify-between items-center group hover:bg-white/5 transition-all">
                    <div>
                        <div class="flex items-center gap-2 mb-1">
                            <span class="font-bold text-white">${l.date}</span>
                            <span class="text-xs px-2 py-0.5 rounded bg-white/10 text-slate-300 font-mono">${l.hours}h</span>
                        </div>
                        <p class="text-slate-400 text-sm">${l.description}</p>
                    </div>
                </div>`).join('');
        }

        async function fetchLogs() {
            const { data, error } = await supabase.from('work_logs').select('*').order('date', { ascending: false });
            if (error) console.error('Error:', error);
            else renderLogs(data);
        }

        window.submitLog = async (e) => {
            e.preventDefault();
            const date = document.getElementById('logDate').value;
            const hours = document.getElementById('logHours').value;
            const description = document.getElementById('logDesc').value;

            // Submit to Supabase
            const { error } = await supabase.from('work_logs').insert([{ date, hours, description }]);
            
            if(error) {
                alert('Error adding log');
                console.error(error);
            } else {
                e.target.reset();
                document.getElementById('logDate').valueAsDate = new Date();
                fetchLogs(); // Refresh list
            }
        }

        // Initial Load
        fetchLogs();
    </script>
</body>
</html>